@tailwind base;
@tailwind components;
@tailwind utilities;

/* Apply the selected font globally */
body {
  font-family: var(--app-font, 'Inter', sans-serif) !important;
}

/* ── Density: compact ────────────────────────────────────────── */
[data-density="compact"] {
  font-size: 13px;
}
[data-density="compact"] table th,
[data-density="compact"] table td {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
  font-size: 0.8125rem;
}
[data-density="compact"] .p-6 { padding: 1rem; }
[data-density="compact"] .p-4 { padding: 0.625rem; }
[data-density="compact"] .py-4 { padding-top: 0.625rem; padding-bottom: 0.625rem; }
[data-density="compact"] .py-3 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
[data-density="compact"] .py-2 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
[data-density="compact"] .gap-6 { gap: 1rem; }
[data-density="compact"] .gap-4 { gap: 0.625rem; }
[data-density="compact"] .space-y-6 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(1rem * var(--tw-space-y-reverse)); }
[data-density="compact"] .space-y-4 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(0.625rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(0.625rem * var(--tw-space-y-reverse)); }
[data-density="compact"] .mb-6 { margin-bottom: 1rem; }
[data-density="compact"] .mb-4 { margin-bottom: 0.625rem; }
[data-density="compact"] .text-3xl { font-size: 1.5rem; }
[data-density="compact"] .text-xl { font-size: 1.125rem; }
[data-density="compact"] .text-lg { font-size: 1rem; }
[data-density="compact"] .rounded-xl { border-radius: 0.625rem; }

/* ── Density: cozy ───────────────────────────────────────────── */
[data-density="cozy"] {
  font-size: 16px;
}
[data-density="cozy"] table th,
[data-density="cozy"] table td {
  padding-top: 0.875rem;
  padding-bottom: 0.875rem;
}
[data-density="cozy"] .p-6 { padding: 1.75rem; }
[data-density="cozy"] .p-4 { padding: 1.25rem; }
[data-density="cozy"] .py-2 { padding-top: 0.625rem; padding-bottom: 0.625rem; }
[data-density="cozy"] .gap-6 { gap: 1.75rem; }
[data-density="cozy"] .gap-4 { gap: 1.25rem; }
[data-density="cozy"] .space-y-6 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(1.75rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(1.75rem * var(--tw-space-y-reverse)); }
[data-density="cozy"] .space-y-4 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(1.25rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(1.25rem * var(--tw-space-y-reverse)); }

@layer base {
  :root {
    --app-font: 'Inter', sans-serif;
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    /* Match sidebar slate-900 (#0f172a) = hsl(222.2, 47.4%, 11.2%) */
    --background: 222.2 47.4% 11.2%;
    --foreground: 210 40% 98%;
    --card: 217.2 32.6% 15%;
    --card-foreground: 210 40% 98%;
    --popover: 217.2 32.6% 15%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 215 20% 25%;
    --input: 215 20% 25%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-secondary;
}

::-webkit-scrollbar-thumb {
  @apply bg-muted-foreground/30 rounded-md;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-muted-foreground/50;
}

/* ══════════════════════════════════════════════════════════════════════════
   GLOBAL DARK MODE OVERRIDES
   These use the .dark class on <html> to restyle common Tailwind patterns
   throughout the entire app — backgrounds, text, borders, cards, inputs,
   tables, dropdowns, modals, etc.
   ══════════════════════════════════════════════════════════════════════════ */

/* --- Backgrounds --- */
.dark .bg-white         { background-color: #1e293b !important; }  /* slate-800 */
.dark .bg-gray-50       { background-color: #0f172a !important; }  /* slate-900 */
.dark .bg-gray-50\/80   { background-color: rgba(15, 23, 42, 0.8) !important; }
.dark .bg-gray-100      { background-color: #1e293b !important; }
.dark .bg-gray-200      { background-color: #334155 !important; }  /* slate-700 */
.dark .bg-slate-50      { background-color: #0f172a !important; }
.dark .bg-slate-100     { background-color: #1e293b !important; }

/* Card-like surfaces one step lighter */
.dark .bg-gray-50\/50   { background-color: rgba(30, 41, 59, 0.5) !important; }
.dark .bg-gray-50\/80   { background-color: rgba(15, 23, 42, 0.8) !important; }

/* --- Text: dark → white, light gray → lighter gray --- */
.dark .text-gray-900    { color: #f1f5f9 !important; }  /* slate-100 */
.dark .text-gray-800    { color: #e2e8f0 !important; }  /* slate-200 */
.dark .text-gray-700    { color: #cbd5e1 !important; }  /* slate-300 */
.dark .text-gray-600    { color: #94a3b8 !important; }  /* slate-400 */
.dark .text-gray-500    { color: #94a3b8 !important; }  /* slate-400 */
.dark .text-gray-400    { color: #64748b !important; }  /* slate-500 */
.dark .text-gray-300    { color: #64748b !important; }  /* slate-500 */
.dark .text-slate-900   { color: #f1f5f9 !important; }
.dark .text-slate-800   { color: #e2e8f0 !important; }
.dark .text-slate-700   { color: #cbd5e1 !important; }
.dark .text-slate-600   { color: #94a3b8 !important; }
.dark .text-black       { color: #f1f5f9 !important; }

/* --- Colored text: boost to vivid/bright shades for dark backgrounds --- */
/* Blue */
.dark .text-blue-500    { color: #60a5fa !important; }  /* blue-400 */
.dark .text-blue-600    { color: #60a5fa !important; }  /* blue-400 */
.dark .text-blue-700    { color: #93bbfd !important; }  /* blue-300ish */
.dark .text-blue-800    { color: #93c5fd !important; }  /* blue-300 */
.dark .text-blue-900    { color: #bfdbfe !important; }  /* blue-200 */

/* Green */
.dark .text-green-500   { color: #4ade80 !important; }  /* green-400 */
.dark .text-green-600   { color: #4ade80 !important; }  /* green-400 */
.dark .text-green-700   { color: #86efac !important; }  /* green-300 */
.dark .text-green-800   { color: #86efac !important; }  /* green-300 */
.dark .text-green-900   { color: #bbf7d0 !important; }  /* green-200 */

/* Emerald */
.dark .text-emerald-500 { color: #34d399 !important; }  /* emerald-400 */
.dark .text-emerald-600 { color: #34d399 !important; }  /* emerald-400 */
.dark .text-emerald-700 { color: #6ee7b7 !important; }  /* emerald-300 */
.dark .text-emerald-800 { color: #6ee7b7 !important; }  /* emerald-300 */

/* Red */
.dark .text-red-500     { color: #f87171 !important; }  /* red-400 */
.dark .text-red-600     { color: #f87171 !important; }  /* red-400 */
.dark .text-red-700     { color: #fca5a5 !important; }  /* red-300 */
.dark .text-red-800     { color: #fca5a5 !important; }  /* red-300 */
.dark .text-red-900     { color: #fecaca !important; }  /* red-200 */

/* Amber / Yellow */
.dark .text-amber-500   { color: #fbbf24 !important; }  /* amber-400 */
.dark .text-amber-600   { color: #fbbf24 !important; }  /* amber-400 */
.dark .text-amber-700   { color: #fcd34d !important; }  /* amber-300 */
.dark .text-amber-800   { color: #fde68a !important; }  /* amber-200 */
.dark .text-yellow-500  { color: #facc15 !important; }  /* yellow-400 */
.dark .text-yellow-600  { color: #facc15 !important; }  /* yellow-400 */
.dark .text-yellow-700  { color: #fde047 !important; }  /* yellow-300 */
.dark .text-yellow-800  { color: #fef08a !important; }  /* yellow-200 */

/* Orange */
.dark .text-orange-500  { color: #fb923c !important; }  /* orange-400 */
.dark .text-orange-600  { color: #fb923c !important; }  /* orange-400 */
.dark .text-orange-700  { color: #fdba74 !important; }  /* orange-300 */
.dark .text-orange-800  { color: #fed7aa !important; }  /* orange-200 */

/* Purple */
.dark .text-purple-500  { color: #c084fc !important; }  /* purple-400 */
.dark .text-purple-600  { color: #c084fc !important; }  /* purple-400 */
.dark .text-purple-700  { color: #d8b4fe !important; }  /* purple-300 */
.dark .text-purple-800  { color: #d8b4fe !important; }  /* purple-300 */

/* Indigo */
.dark .text-indigo-500  { color: #818cf8 !important; }  /* indigo-400 */
.dark .text-indigo-600  { color: #818cf8 !important; }  /* indigo-400 */
.dark .text-indigo-700  { color: #a5b4fc !important; }  /* indigo-300 */
.dark .text-indigo-800  { color: #a5b4fc !important; }  /* indigo-300 */

/* Teal / Cyan */
.dark .text-teal-500    { color: #2dd4bf !important; }  /* teal-400 */
.dark .text-teal-600    { color: #2dd4bf !important; }  /* teal-400 */
.dark .text-teal-700    { color: #5eead4 !important; }  /* teal-300 */
.dark .text-cyan-500    { color: #22d3ee !important; }  /* cyan-400 */
.dark .text-cyan-600    { color: #22d3ee !important; }  /* cyan-400 */
.dark .text-cyan-700    { color: #67e8f9 !important; }  /* cyan-300 */

/* Pink */
.dark .text-pink-500    { color: #f472b6 !important; }  /* pink-400 */
.dark .text-pink-600    { color: #f472b6 !important; }  /* pink-400 */
.dark .text-pink-700    { color: #f9a8d4 !important; }  /* pink-300 */

/* Hover colored text — keep vivid */
.dark .hover\:text-blue-700:hover   { color: #93c5fd !important; }
.dark .hover\:text-blue-600:hover   { color: #60a5fa !important; }
.dark .hover\:text-green-700:hover  { color: #86efac !important; }
.dark .hover\:text-green-600:hover  { color: #4ade80 !important; }
.dark .hover\:text-red-700:hover    { color: #fca5a5 !important; }
.dark .hover\:text-red-600:hover    { color: #f87171 !important; }
.dark .hover\:text-purple-700:hover { color: #d8b4fe !important; }
.dark .hover\:text-purple-600:hover { color: #c084fc !important; }
.dark .hover\:text-amber-700:hover  { color: #fcd34d !important; }
.dark .hover\:text-amber-600:hover  { color: #fbbf24 !important; }

/* --- Borders --- */
.dark .border-gray-100  { border-color: #1e293b !important; }
.dark .border-gray-200  { border-color: #334155 !important; }  /* slate-700 */
.dark .border-gray-300  { border-color: #475569 !important; }  /* slate-600 */
.dark .border-slate-200 { border-color: #334155 !important; }
.dark .border-slate-300 { border-color: #475569 !important; }
.dark .divide-gray-100 > :not([hidden]) ~ :not([hidden])  { border-color: #1e293b !important; }
.dark .divide-gray-200 > :not([hidden]) ~ :not([hidden])  { border-color: #334155 !important; }
.dark .divide-gray-300 > :not([hidden]) ~ :not([hidden])  { border-color: #475569 !important; }

/* --- Inputs, selects, textareas --- */
.dark input:not([type="checkbox"]):not([type="radio"]):not([type="color"]),
.dark select,
.dark textarea {
  background-color: #0f172a !important;  /* slate-900 */
  color: #e2e8f0 !important;             /* slate-200 */
  border-color: #475569 !important;       /* slate-600 */
}
.dark input::placeholder,
.dark textarea::placeholder {
  color: #64748b !important;  /* slate-500 */
}
.dark input:focus,
.dark select:focus,
.dark textarea:focus {
  border-color: #3b82f6 !important;       /* blue-500 */
}

/* --- Tables --- */
.dark table thead tr         { background-color: #1e293b !important; }
.dark .bg-gray-50\/80        { background-color: rgba(30, 41, 59, 0.8) !important; }
.dark table tbody tr         { background-color: transparent !important; }
.dark table tbody tr:hover   { background-color: rgba(30, 41, 59, 0.5) !important; }
.dark table th               { color: #94a3b8 !important; }
.dark table td               { color: #e2e8f0 !important; }

/* --- Shadows: softer in dark mode --- */
.dark .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3) !important; }
.dark .shadow    { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 1px 2px -1px rgba(0, 0, 0, 0.3) !important; }
.dark .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -4px rgba(0, 0, 0, 0.4) !important; }
.dark .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 8px 10px -6px rgba(0, 0, 0, 0.4) !important; }
.dark .shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6) !important; }

/* --- Rings --- */
.dark .ring-gray-200 { --tw-ring-color: #334155 !important; }
.dark .ring-gray-300 { --tw-ring-color: #475569 !important; }

/* --- Hover states --- */
.dark .hover\:bg-gray-50:hover   { background-color: #334155 !important; }
.dark .hover\:bg-gray-100:hover  { background-color: #334155 !important; }
.dark .hover\:bg-gray-200:hover  { background-color: #475569 !important; }
.dark .hover\:bg-blue-50:hover   { background-color: rgba(59, 130, 246, 0.15) !important; }
.dark .hover\:bg-green-50:hover  { background-color: rgba(34, 197, 94, 0.15) !important; }
.dark .hover\:bg-purple-50:hover { background-color: rgba(168, 85, 247, 0.15) !important; }
.dark .hover\:bg-red-50:hover    { background-color: rgba(239, 68, 68, 0.15) !important; }

/* --- Alert / status backgrounds --- */
.dark .bg-blue-50    { background-color: rgba(59, 130, 246, 0.12) !important; }
.dark .bg-green-50   { background-color: rgba(34, 197, 94, 0.12) !important; }
.dark .bg-red-50     { background-color: rgba(239, 68, 68, 0.12) !important; }
.dark .bg-amber-50   { background-color: rgba(245, 158, 11, 0.12) !important; }
.dark .bg-yellow-50  { background-color: rgba(234, 179, 8, 0.12) !important; }
.dark .bg-purple-50  { background-color: rgba(168, 85, 247, 0.12) !important; }
.dark .bg-emerald-50 { background-color: rgba(16, 185, 129, 0.12) !important; }
.dark .bg-orange-50  { background-color: rgba(249, 115, 22, 0.12) !important; }
.dark .bg-indigo-50  { background-color: rgba(99, 102, 241, 0.12) !important; }

/* Status borders in dark mode */
.dark .border-blue-200   { border-color: rgba(59, 130, 246, 0.3) !important; }
.dark .border-green-200  { border-color: rgba(34, 197, 94, 0.3) !important; }
.dark .border-red-200    { border-color: rgba(239, 68, 68, 0.3) !important; }
.dark .border-amber-200  { border-color: rgba(245, 158, 11, 0.3) !important; }
.dark .border-yellow-200 { border-color: rgba(234, 179, 8, 0.3) !important; }
.dark .border-purple-200 { border-color: rgba(168, 85, 247, 0.3) !important; }
.dark .border-emerald-200 { border-color: rgba(16, 185, 129, 0.3) !important; }

/* --- Dropdown/popover/modal overlays --- */
.dark [class*="rounded-lg"][class*="shadow-lg"][class*="bg-white"],
.dark [class*="rounded-xl"][class*="shadow"][class*="bg-white"] {
  background-color: #1e293b !important;
  border-color: #334155 !important;
}

/* --- Badge-like elements with light backgrounds --- */
.dark .bg-blue-100   { background-color: rgba(59, 130, 246, 0.2) !important; }
.dark .bg-green-100  { background-color: rgba(34, 197, 94, 0.2) !important; }
.dark .bg-red-100    { background-color: rgba(239, 68, 68, 0.2) !important; }
.dark .bg-amber-100  { background-color: rgba(245, 158, 11, 0.2) !important; }
.dark .bg-yellow-100 { background-color: rgba(234, 179, 8, 0.2) !important; }
.dark .bg-purple-100 { background-color: rgba(168, 85, 247, 0.2) !important; }
.dark .bg-emerald-100 { background-color: rgba(16, 185, 129, 0.2) !important; }
.dark .bg-orange-100 { background-color: rgba(249, 115, 22, 0.2) !important; }
.dark .bg-indigo-100 { background-color: rgba(99, 102, 241, 0.2) !important; }

/* --- Skeleton / loading --- */
.dark .animate-pulse { opacity: 0.3; }

/* --- Gradient backgrounds in dark mode --- */
.dark [class*="from-blue-50"]   { --tw-gradient-from: rgba(59, 130, 246, 0.12) !important; }
.dark [class*="to-indigo-50"]   { --tw-gradient-to: rgba(99, 102, 241, 0.12) !important; }
.dark [class*="from-green-50"]  { --tw-gradient-from: rgba(34, 197, 94, 0.12) !important; }
.dark [class*="to-emerald-50"]  { --tw-gradient-to: rgba(16, 185, 129, 0.12) !important; }
.dark [class*="from-purple-50"] { --tw-gradient-from: rgba(168, 85, 247, 0.12) !important; }
.dark [class*="to-blue-50"]     { --tw-gradient-to: rgba(59, 130, 246, 0.12) !important; }
.dark [class*="from-amber-50"]  { --tw-gradient-from: rgba(245, 158, 11, 0.12) !important; }
.dark [class*="to-amber-50"]    { --tw-gradient-to: rgba(245, 158, 11, 0.12) !important; }
.dark [class*="from-red-50"]    { --tw-gradient-from: rgba(239, 68, 68, 0.12) !important; }
.dark [class*="to-red-50"]      { --tw-gradient-to: rgba(239, 68, 68, 0.12) !important; }

/* --- Additional border-top/bottom patterns --- */
.dark .border-t-gray-200 { border-top-color: #334155 !important; }
.dark .border-b-gray-200 { border-bottom-color: #334155 !important; }
.dark .border-t-gray-100 { border-top-color: #1e293b !important; }
.dark .border-b-gray-100 { border-bottom-color: #1e293b !important; }
.dark .border-t-2.border-gray-900 { border-top-color: #e2e8f0 !important; }

/* --- Hover states for colored buttons --- */
.dark .hover\:bg-blue-100:hover   { background-color: rgba(59, 130, 246, 0.25) !important; }
.dark .hover\:bg-green-100:hover  { background-color: rgba(34, 197, 94, 0.25) !important; }
.dark .hover\:bg-red-100:hover    { background-color: rgba(239, 68, 68, 0.25) !important; }
.dark .hover\:bg-amber-100:hover  { background-color: rgba(245, 158, 11, 0.25) !important; }
.dark .hover\:bg-purple-100:hover { background-color: rgba(168, 85, 247, 0.25) !important; }

/* --- Hover text overrides --- */
.dark .hover\:text-gray-900:hover { color: #f1f5f9 !important; }
.dark .hover\:text-gray-700:hover { color: #cbd5e1 !important; }

/* --- Hover shadow in dark mode --- */
.dark .hover\:shadow-lg:hover { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -4px rgba(0, 0, 0, 0.4) !important; }
.dark .hover\:shadow-md:hover { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3) !important; }

/* --- Checkboxes / radios --- */
.dark input[type="checkbox"],
.dark input[type="radio"] {
  border-color: #475569 !important;
  background-color: #0f172a !important;
}

/* --- General placeholder text --- */
.dark .placeholder-gray-400::placeholder,
.dark .placeholder-gray-500::placeholder {
  color: #64748b !important;
}

/* --- Focus ring colors in dark mode --- */
.dark .focus\:ring-gray-200:focus { --tw-ring-color: #334155 !important; }
.dark .focus\:ring-gray-300:focus { --tw-ring-color: #475569 !important; }
.dark .focus\:border-gray-300:focus { border-color: #475569 !important; }

/* --- border-gray-900 in summaries should remain visible --- */
.dark .border-gray-900 { border-color: #94a3b8 !important; }

/* --- Recharts inline-styled tooltips --- */
.dark .recharts-tooltip-wrapper .recharts-default-tooltip {
  background-color: #1e293b !important;
  border-color: #475569 !important;
  color: #e2e8f0 !important;
}
.dark .recharts-tooltip-wrapper .recharts-default-tooltip .recharts-tooltip-label {
  color: #f1f5f9 !important;
}
.dark .recharts-tooltip-wrapper .recharts-default-tooltip .recharts-tooltip-item {
  color: #e2e8f0 !important;
}
.dark .recharts-cartesian-grid line {
  stroke: #334155 !important;
}
.dark .recharts-text {
  fill: #94a3b8 !important;
}
.dark .recharts-legend-item-text {
  color: #cbd5e1 !important;
}

/* Smooth animations for flyout menus */
@keyframes slideInFromLeft {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-in {
  animation: slideInFromLeft 150ms ease-out;
}

/* Focus visible for accessibility */
*:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-500 ring-0;
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    @apply text-black bg-white;
  }
}
